<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>KnowledgeBase</title>
    <meta name="description" content="KnowledgeBase">

    <script src="static/knowledge-base/js/lib/d3.v3.min.js"></script>

    <link rel="stylesheet" href="static/knowledge-base/js/lib/jquery-ui.css">
    <script src="static/knowledge-base/js/lib/jquery.min.js"></script>
    <script src="static/knowledge-base/js/lib/jquery-ui.js"></script>
    <script src="static/knowledge-base/js/lib/underscore-min.js"></script>
    <script src="static/knowledge-base/js/lib/angular.min.js"></script>

    <!--Leaflet-->
    <link rel="stylesheet" href="static/knowledge-base/js/lib/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="static/knowledge-base/js/lib/leaflet.js"></script>

    <!--Bootstrap -->
    <link rel="stylesheet" href="static/knowledge-base/js/lib/bootstrap.min.css">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"-->
    <!--integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">-->
    <script src="static/knowledge-base/js/lib/bootstrap.min.js"></script>

    <link rel="stylesheet" href="static/knowledge-base/style/style.css?v=1">
    <link rel="stylesheet" href="static/knowledge-base/style/my-common.css?v=1">
    <script src="static/knowledge-base/js/lib/xml2json.js"></script>
    <script src="static/common/util.js"></script>
    <script src="static/knowledge-base/js/lod-utils.js"></script>
    <script src="static/knowledge-base/js/wikidata.js"></script>
    <script src="static/knowledge-base/js/dbpedia.js"></script>
    <script src="static/knowledge-base/js/knowledge-base.js"></script>
</head>

<body ng-app="app" ng-controller="Controller">

<div class="wrapper" style="display: none;">
    <header>
        <div id="searchbox" class="searchbox form-inline">
            <img src="static/semantic/img/buyutec.png" class="buyutec" style="margin-right: 10px;"/>

            <div name="searchForm" class="form-inline pl-4">
                <input type="text" class="form-control" id="searchinput" name="searchinput" value="">
            </div>
        </div>
    </header>

    <div class="core clearfix">
        <section class="space container">
            <div class="row">
                <div class="col-3">
                    <form>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="blue">Entity</label>
                                <input type="text" class="form-control" id="entity-input">
                            </div>
                            <div class="form-group">
                                <label class="blue">Category</label>
                                <input type="text" class="form-control" id="category-input">
                            </div>
                            <div class="form-group">
                                <input type="button" class="btn btn-default blue" value="Save" ng-click="saveEntity()">
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-md-5">
                    <div class="col-md-12" class="entity-box">
                        <ul>
                            <li style="list-style: none;" ng-repeat="e in entities">
                                <a href ng-click="showEntity(e)">{{e.name}}</a>
                            </li>
                        </ul>
                    </div>
                    <br/><br/><br/>

                    <div class="col-md-12">
                        <hr class="entity-divider">
                    </div>
                    <br/>

                    <div class="col-md-12" class="web-page-box">
                        <ul>
                            <li style="list-style: none;" ng-repeat="e in webPages">
                                <a href ng-click="showEntity(e)">{{e.name}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4 property-box" ng-show="selectedEntity.entityType != 'web-page'"
                     ng-class="propertyBoxClass">
                    <div ng-if="propertiesLoading" class="overlay">
                        <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
                    </div>
                    <div>
                        <label class="blue">
                        <span ng-if="selectedEntities.length > 2">
                            <a href="#" ng-click="openLastSecondEntity()">...</a>
                            &nbsp;>&nbsp;
                        </span>
                        </label>
                        <label class="blue" ng-repeat="entity in selectedEntities.slice(-2)">
                            <span ng-if="$index == 1 || selectedEntities.length == 1">{{entity.name}}</span>
                        <span ng-if="$index == 0 && selectedEntities.length > 1">
                            <a href="#" ng-click="openLastEntity()">{{entity.name}}</a>
                        </span>
                            <span ng-if="$index < 1 && selectedEntities.length > 1">&nbsp;>&nbsp;</span>
                        </label>

                        <br>

                        <div ng-repeat="property in selectedEntity.propertyGroups | filter:{visible:true}">
                            <label class="property-value">{{property.name}}</label>
                            <br>

                            <div ng-repeat="val in property.values">
                                <label class="property-value"
                                       ng-if="!isPropertyLink(val)">{{val.value}}</label>
                                <label class="property-value" ng-if="isPropertyLink(val)">
                                    <!--<a ng-href="{{goTo(property)}}" target="_blank">{{property.valueLabel}}</a>-->
                                    <a href="#" ng-click="openProperty(val)">{{val.valueLabel}}</a>
                                </label>
                            </div>
                            <hr class="property-divider">
                        </div>
                    </div>
                    <div class="col-md-4 property-box" ng-show="selectedEntity.entityType == 'web-page'">
                        <label class="blue">
                            Entities
                        </label>

                        <div ng-repeat="entity in selectedEntity.annotationEntities">
                            <label class="property-value">{{entity.name}}</label>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <section class="right">
            <div class="right_inner">
                <div>
                    <!--<label class="info-label mb-15">image:</label>-->

                    <div class="info-image"><img ng-if="selectedEntity.image" ng-src="{{selectedEntity.image}}"/></div>
                </div>

                <div class="row">
                    <div ng-if="selectedEntity" class="col-md-12">
                        <div ng-if="selectedEntity" class="form-group">
                            <label class="info-title mb-5">{{selectedEntity.name}}</label>

                            <div class="info-text">{{selectedEntity.shortDescription}}</div>
                        </div>

                        <div ng-if="selectedEntity" class="form-group">
                            <!--<label class="info-label mb-15">description:</label>-->
                            <hr style="color:white; margin-top: 10px; margin-bottom:15px;">

                            <div class="info-text description">{{selectedEntity.description}}</div>
                        </div>
                        <div class="row link-box">
                            <div ng-if="selectedEntity && selectedEntity.dbpediaUri" class="form-group col-md-3">
                                <div class="external-link">
                                    <a ng-href="{{selectedEntity.dbpediaUri}}" target="_blank">
                                        <img src="static/knowledge-base/img/dbpedia.png"/>
                                    </a>
                                </div>
                            </div>
                            <div ng-if="selectedEntity && selectedEntity.wikidataId" class="form-group  col-md-3">
                                <div class="external-link">
                                    <a ng-href="https://www.wikidata.org/wiki/{{selectedEntity.wikidataId}}"
                                       target="_blank">
                                        <img src="static/knowledge-base/img/wikidata_text.png"/>
                                    </a>
                                </div>
                            </div>
                            <div ng-if="selectedEntity && selectedEntity.wikipediaUri" class="form-group  col-md-3">

                                <div class="external-link">
                                    <a ng-href="{{selectedEntity.wikipediaUri}}" target="_blank">
                                        <img src="static/knowledge-base/img/wikipedia.png"/>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="form-group right-save-button">
                            <input type="button" class="btn btn-default blue" value="Save"
                                   ng-if="!isEntitySaved() && !propertiesLoading"
                                   ng-click="saveEntity()">
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </div>
</div>

</body>
</html>