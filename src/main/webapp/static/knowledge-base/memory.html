<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>KnowledgeBase</title>
    <meta name="description" content="KnowledgeBase">

    <script src="static/knowledge-base/js/lib/d3.v3.min.js"></script>

    <link rel="stylesheet" href="static/knowledge-base/js/lib/jquery-ui.css">
    <script src="static/knowledge-base/js/lib/jquery.min.js"></script>
    <script src="static/knowledge-base/js/lib/jquery-ui.js"></script>
    <script src="static/knowledge-base/js/lib/underscore-min.js"></script>
    <script src="static/knowledge-base/js/lib/angular.min.js"></script>

    <!--Angular ngDialog-->
    <link href="static/knowledge-base/js/lib/ngDialog/ngDialog.min.css" rel="stylesheet"/>
    <script type="text/javascript" src="static/knowledge-base/js/lib/ngDialog/ngDialog.min.js"></script>

    <!--Leaflet-->
    <link rel="stylesheet" href="static/knowledge-base/js/lib/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="static/knowledge-base/js/lib/leaflet.js"></script>

    <!--Bootstrap -->
    <link rel="stylesheet" href="static/knowledge-base/js/lib/bootstrap/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"-->
    <!--integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">-->
    <script src="static/knowledge-base/js/lib/bootstrap.min.js"></script>

    <link rel="stylesheet" href="static/knowledge-base/style/style.css?v=1">
    <link rel="stylesheet" href="static/knowledge-base/style/my-common.css?v=1">
    <script src="static/knowledge-base/js/lib/xml2json.js"></script>
    <script src="static/knowledge-base/js/lib/ImageResolver.0.5.4.js"></script>
    <script src="static/common/util.js"></script>
    <script src="static/knowledge-base/js/lod-utils.js"></script>
    <script src="static/knowledge-base/js/lib/rel-finder/SPARQLQueryBuilder.js"></script>
    <script src="static/knowledge-base/js/wikidata.js"></script>
    <script src="static/knowledge-base/js/dbpedia.js"></script>
    <script src="static/knowledge-base/js/lod-service.js"></script>
    <script src="static/knowledge-base/js/autocomplete-service.js"></script>
    <script src="static/knowledge-base/js/knowledge-base.js"></script>
</head>

<body ng-app="app" ng-controller="Controller">
<div ng-if="allscreenLoading" class="overlay">
    <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
</div>

<div class="wrapper" style="display: none;">
<header>
    <form id="searchbox" class="searchbox form-inline">
        <img src="static/semantic/img/buyutec.png" class="buyutec" style="margin-right: 10px;"/>

        <div class="form-group">
            <input type="text" class="form-control" id="entity-input" placeholder="Name">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Category" id="category-input">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" placeholder="SubCategory" id="subcategory-input">
        </div>
        <div class="form-group">
            <input type="button" class="btn btn-default blue" value="Save"
                   ng-if="!isEntitySaved() && !propertiesLoading"
                   ng-click="saveEntity()">
        </div>
    </form>
</header>

<div class="core clearfix">
<section class="space container">
<div class="top-menu">
    <div class="top-menu-item-wrapper" ng-repeat="c in selectedCategoryToShow.subCategories">
        <div class="top-menu-item" ng-class="c.selected">
            <label>
                <a href="#" ng-click="showSubCategoryItems($event,c)">{{c.name}}</a>
            </label>
        </div>
    </div>
</div>
<div class="row">

    <div class="col-md-1 side-menu">
        <div class="side-menu-item-wrapper" ng-repeat="c in categories">
            <div class="side-menu-item" ng-class="c.selected">
                <label>
                    <a href="#" ng-click="showCategoryItems($event,c)">{{c.name}}</a>
                </label>
            </div>
        </div>
    </div>
    <!--<div class="col-md-1">-->
    <!--<table class="side-menu-table">-->
    <!--<tr ng-repeat="c in categories">-->
    <!--<td>-->
    <!--<a href="#">{{c.name}}</a>-->
    <!--</td>-->
    <!--</tr>-->
    <!--</table>-->
    <!--</div>-->

    <div class="col-md-8 memory-box">

        <div style="list-style: none;">
            <div class="row" style="display:none">
                <div class="col-md-12">
                    <label class="category-header">
                        <!--<a href="#" ng-click="showCategory(c);">-->
                        {{selectedCategoryToShow.name}}
                        <!--</a>-->
                    </label>
                </div>
            </div>
            <div class="row" ng-attr-id="{{ 'entity-row-' + c.id }}">

                <div id="columns">
                    <div class="entity" id="{{e.id}}"
                         ng-repeat="e in selectedCategoryToShow.selectedSubCategory.entities">
                        <a href ng-click="showEntity(e)" ng-dblclick="entityDoubleClicked(e)">
                            <figure ng-if="e.smallImage && e.smallImage != ''">
                                <img ng-src="knowledgeBase/api/image/{{e.smallImage}}"
                                     ng-mouseover="mouseOver($event,e)" ng-mouseleave="mouseLeave($event,e)">
                                <figcaption>{{e.name}}</figcaption>
                            </figure>
                            <figure ng-if="!e.smallImage">
                                <div ng-if="!e.smallImage" class="figure-text">
                                    {{e.name}}
                                </div>
                            </figure>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <br/><br/><br/>
    </div>

    <div class="col-md-3 property-box" ng-show="selectedEntity.entityType != 'web-page'"
         ng-class="propertyBoxClass">
        <div ng-if="propertiesLoading" class="overlay">
            <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
        </div>
        <div>
            <label class="blue">
                <p ng-if="selectedEntities.length > 2">
                    <a href="#" ng-click="openLastSecondEntity()">...</a>
                </p>
            </label>
            <label class="entity-header" ng-repeat="entity in selectedEntities.slice(-2)">
                <span ng-if="$index == 1 || selectedEntities.length == 1">{{entity.name}}</span>
                        <span ng-if="$index == 0 && selectedEntities.length > 1">
                            <a href="#" ng-click="openLastEntity()">{{entity.name}}</a>
                        </span>
                <span ng-if="$index < 1 && selectedEntities.length > 1">&nbsp;>&nbsp;</span>
            </label>
            <br>

            <label ng-if="selectedEntity" class=""
                   style="font-size: 15px; font-weight: 300; font-style: italic;">
                {{selectedEntity.categoryName}}
            </label>

            <br>

            <div ng-repeat="property in filteredProperties()">
                <label class="property-value">{{property.name}}</label>
                <br>

                <div ng-repeat="val in property.values">
                    <label class="property-value"
                           ng-if="!isPropertyLink(val)">{{val.value}}</label>
                    <label class="property-value" ng-if="isPropertyLink(val)">
                        <a ng-if="(val.datatype != 'external-id' && isDbpediaResource(val) || val.datatype == 'wikibase-item')
                            || val.source == 'custom'"
                           href="#" ng-click="openProperty(val)">
                            {{val.valueLabel}}
                        </a>
                        <a ng-if="val.datatype != 'wikibase-item' && val.datatype != 'external-id'  && !isDbpediaResource(val)"
                           ng-href="{{val.value}}" target="_blank">
                            <span ng-if="val.valueLabel">{{val.valueLabel}}</span>
                            <span ng-if="!val.valueLabel">{{val.value}}</span>
                        </a>
                        <a ng-if="val.datatype == 'external-id'"
                           href="{{val.metaProperty.externalSourceUri}}{{val.value}}" target="_blank">
                            {{val.metaProperty.externalSourceUri}}{{val.value}}
                        </a>
                    </label>
                </div>
                <hr class="property-divider">
            </div>
        </div>
    </div>

    <div class="col-md-3 property-box" ng-show="selectedEntity.entityType == 'web-page'">
        <label class="blue">
            Entities
        </label>

        <div ng-repeat="entity in selectedEntity.annotationEntities">
            <label class="property-value">
                <a href ng-click="showEntity(entity)">{{entity.name}}</a>
            </label>
        </div>
    </div>
    <br>

    <div class="col-md-3 property-box" ng-show="selectedEntity.entityType == 'web-page'">
        <label class="blue">
            Existing Entities
        </label>

        <div ng-repeat="entity in existingEntities">
            <label class="property-value">
                <a href ng-click="showEntity(entity)">{{entity.name}}</a>
            </label>
        </div>
    </div>

    <br>

    <div ng-if="selectedEntity && selectedEntity.entityType != 'web-page'"
         class="col-md-3 property-filter">
        <!--<a href="#" ng-click="removePropertyFilter()">See All</a>-->
        <!--<div class="col-md-12">-->
        <div class="filter">
            <a href="#" ng-click="showOnlyCustomProperties()" class="custom">Custom</a>
            <a href="#" ng-click="showOnlyFilteredProperties()"
               class="filtered selected">Filtered</a>
            <a href="#" ng-click="showAllProperties()" class="all">All</a>
        </div>
        <!--</div>-->
    </div>

    <div class="col-md-3 property-box" ng-show="selectedEntity.entityType != 'web-page'"
         ng-class="propertyBoxClass">
        <div ng-if="propertiesLoading" class="overlay">
            <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
        </div>
        <div ng-show="selectedEntity">
            <label class="blue">
                Existing Entities
            </label>

            <br>

            <div ng-repeat="property in existingElements">
                <label class="property-value">{{property.name}}</label>
                <br>

                <div ng-repeat="val in property.values">
                    <label class="property-value"
                           ng-if="!isPropertyLink(val)">{{val.value}}</label>
                    <label class="property-value" ng-if="isPropertyLink(val)">
                        <a ng-if="val.datatype != 'external-id' && isDbpediaResource(val)"
                           href="#" ng-click="openProperty(val)">
                            {{val.valueLabel}}
                        </a>
                        <a ng-if="val.datatype != 'external-id' && !isDbpediaResource(val)"
                           href="#" ng-click="openProperty(val)">
                            {{val.valueLabel}}
                        </a>
                        <a ng-if="val.datatype == 'external-id'"
                           href="{{val.metaProperty.externalSourceUri}}{{val.value}}" target="_blank">
                            {{val.metaProperty.externalSourceUri}}{{val.value}}
                        </a>
                    </label>
                </div>
                <hr class="property-divider">
            </div>
        </div>
    </div>
</div>

</section>

<section class="right">
    <div class="right_inner">
        <div>
            <!--<label class="info-label mb-15">image:</label>-->

            <a href="#" ng-click="openDetailPopup()">
                <div class="info-image">
                    <img ng-if="!isEntitySaved() && selectedEntity.image"
                         ng-src="{{selectedEntity.image}}"/>
                    <img ng-if="isEntitySaved() && selectedEntity.image"
                         ng-src="knowledgeBase/api/image/{{selectedEntity.image}}"/>
                    <img ng-if="!selectedEntity.image && selectedEntity.smallImage"
                         ng-src="knowledgeBase/api/image/{{selectedEntity.smallImage}}"/>

                    <!--<img ng-if="!isEntitySaved() || (selectedEntity.image || selectedEntity.smallImage)" ng-src="{{getImageUrl()}}"/>-->
                </div>
            </a>
        </div>

        <div class="row">
            <div ng-if="selectedEntity" class="col-md-12">
                <div ng-if="selectedEntity" class="form-group">
                    <label class="info-title mb-5">{{selectedEntity.name}}</label>

                    <div class="info-text short-description">{{selectedEntity.shortDescription}}</div>
                </div>

                <div ng-if="selectedEntity" class="form-group">
                    <!--<label class="info-label mb-15">description:</label>-->
                    <hr style="color:white; margin-top: 10px; margin-bottom:15px;">

                    <div class="info-text description">{{selectedEntity.description}}</div>
                </div>
                <div class="row link-box">
                    <div ng-if="selectedEntity && selectedEntity.dbpediaUri" class="form-group col-md-3">
                        <div class="external-link">
                            <a ng-href="{{selectedEntity.dbpediaUri}}" target="_blank">
                                <img src="static/knowledge-base/img/dbpedia.png"/>
                            </a>
                        </div>
                    </div>
                    <div ng-if="selectedEntity && selectedEntity.wikidataId" class="form-group  col-md-3">
                        <div class="external-link">
                            <a ng-href="https://www.wikidata.org/wiki/{{selectedEntity.wikidataId}}"
                               target="_blank">
                                <img src="static/knowledge-base/img/wikidata_text.png"/>
                            </a>
                        </div>
                    </div>
                    <div ng-if="selectedEntity && selectedEntity.wikipediaUri" class="form-group  col-md-3">

                        <div class="external-link">
                            <a ng-href="{{selectedEntity.wikipediaUri}}" target="_blank">
                                <img src="static/knowledge-base/img/wikipedia.png"/>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="form-group" ng-if="!isEntitySaved() && !propertiesLoading">
                    <label class="blue">Category</label>
                    <input type="text" class="form-control" id="entity-category-input" placeholder="Category">
                </div>
                <div class="form-group" ng-if="!isEntitySaved() && !propertiesLoading">
                    <input type="text" class="form-control" id="entity-subcategory-input" placeholder="SubCategory">
                </div>
                <div class="form-group right-save-button">
                    <input type="button" class="btn btn-default blue" value="Save"
                           ng-if="!isEntitySaved() && !propertiesLoading"
                           ng-click="saveEntity()">
                </div>
            </div>
        </div>

    </div>
</section>
</div>
</div>


<div class="custom-context-menu memory-box">
    <ul>
        <li ng-if="memoryBoxContextMenuItems.length != 0" class="title">Add To...</li>

        <a ng-repeat="i in memoryBoxContextMenuItems" href="#" ng-click="addEntityToCategory(i)">
            <li>{{i.item.name}}</li>
        </a>
        <a href="#" ng-if="selectedCategoryToShow.id != 1" ng-click="removeEntityFromCategory()">
            <li style="margin-left: -45px;">Remove from this category</li>
        </a>
    </ul>
</div>

<script type="text/ng-template" id="detail-popup">

<div ng-if="propertiesLoading" class="pop-up-overlay">
    <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
</div>

<!-- Page Content #F5F5F5 -->
<div class="col-md-10 col-md-offset-1 pop-up">
<!-- Simple Blocks -->
<div class="shadow-wrapper">
<div class="block mb-0">
<section class="main-topic container">

    <div class="row topic">
        <div class="col-md-12">
            <div class="detail-info">
                <div class="image">
                    <img ng-if="!isEntitySaved() && selectedEntity.image"
                         ng-src="{{selectedEntity.image}}"/>
                    <img ng-if="isEntitySaved() && selectedEntity.image"
                         ng-src="knowledgeBase/api/image/{{selectedEntity.image}}"/>
                    <img ng-if="!selectedEntity.image && selectedEntity.smallImage"
                         ng-src="knowledgeBase/api/image/{{selectedEntity.smallImage}}"/>

                    <!--<img ng-if="!isEntitySaved() || (selectedEntity.image || selectedEntity.smallImage)" ng-src="{{getImageUrl()}}"/>-->
                </div>

                <div class="text">
                    <label class="info-title mb-5">{{selectedEntity.name}}</label>

                    <div class="info-text info-summary">{{selectedEntity.infoSummary}}</div>

                    <div class="info-text" compile="descriptionShown"></div>
                </div>
                <!--<div class="show-more-less">-->
                <!--<a href="#" ng-if="displayShowMore" ng-click="showMore()">Show more...</a>-->
                <!--<a href="#" ng-if="displayShowLess" ng-click="showLess()">Show less...</a>-->
                <!--</div>-->

                <!--<div class="show-more-less">-->
                <!--<a href="#" ng-if="displayShowNotes" ng-click="showNotes()">Show notes</a>-->
                <!--<a href="#" ng-if="displayHideNotes" ng-click="hideNotes()">Hide notes</a>-->
                <!--</div>-->
            </div>
        </div>
    </div>
    <div class="row" style="margin-top: 10px;" ng-if="isWebPageEntity()">
        <div class="col-md-12">
            <a target="_blank" ng-href="{{selectedEntity.webUri}}">
                Go to web page
            </a>
        </div>
    </div>
    <div class="edit-topic">
        <div class="row">
            <div class="col-md-4">
                <div class="notes">
                    <div class="form-group">
                        <!--<label class="info-title">Notes </label>-->
                        <textarea class="form-control" rows="5"
                                  ng-model="selectedEntity.note"></textarea>
                    </div>
                </div>
            </div>
            <div class="col-md-8 show-add-custom-properties">
                <div class="row">
                    <div class="col-md-12">
                        <label class="custom-property-add-title"
                               title="customPropertyAddTitle">
                            <a href="#" ng-click="showCustomProperties()" class="show">Show</a>
                            /
                            <a href="#" ng-click="addCustomProperties()" class="add not-selected">Add</a>

                            Custom Properties
                        </label>
                    </div>
                </div>
                <div class="show-custom-properties">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="filter">
                                <a href="#" ng-click="showOnlyCustomProperties()" class="custom">Custom</a>
                                <a href="#" ng-click="showOnlyFilteredProperties()"
                                   class="filtered selected">Filtered</a>
                                <a href="#" ng-click="showAllProperties()" class="all">All</a>
                            </div>
                        </div>
                    </div>
                    <div class="row ">
                        <div class="col-md-12 property-box" ng-show="selectedEntity.entityType != 'web-page'"
                             ng-class="propertyBoxClass">
                            <div>

                                <div ng-repeat="property in filteredProperties()">
                                    <label class="property-value">{{property.name}}</label>
                                    <br>

                                    <div ng-repeat="val in property.values">
                                        <label class="property-value"
                                               ng-if="!isPropertyLink(val)">{{val.value}}</label>
                                        <label class="property-value" ng-if="isPropertyLink(val)">
                                            <a ng-if="(val.datatype != 'external-id' && isDbpediaResource(val) || val.datatype == 'wikibase-item')
                            || val.source == 'custom'"
                                               href="#" ng-click="openProperty(val)">
                                                {{val.valueLabel}}
                                            </a>
                                            <a ng-if="val.datatype != 'wikibase-item' && val.datatype != 'external-id'  && !isDbpediaResource(val)"
                                               ng-href="{{val.value}}" target="_blank">
                                                <span ng-if="val.valueLabel">{{val.valueLabel}}</span>
                                                <span ng-if="!val.valueLabel">{{val.value}}</span>
                                            </a>
                                            <a ng-if="val.datatype == 'external-id'"
                                               href="{{val.metaProperty.externalSourceUri}}{{val.value}}"
                                               target="_blank">
                                                {{val.metaProperty.externalSourceUri}}{{val.value}}
                                            </a>
                                        </label>
                                    </div>
                                    <hr class="property-divider">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row add-custom-properties" style="display:none;">
                    <div class="col-md-12" style="padding-left: 0;">
                        <form id="searchbox" class="searchbox form-inline">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Property"
                                       id="custom-property-input">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Object"
                                       id="custom-object-input">
                            </div>
                            <div class="form-group">
                                <input type="button" class="btn btn-default blue" value="Save"
                                       ng-click="saveCustomProperty()">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <input type="button" class="btn btn-default blue" value="Save"
                           ng-if="!isEntitySaved() && !propertiesLoading"
                           ng-click="saveEntity()">
                    <input type="button" class="btn btn-default blue" value="Save"
                           ng-if="isEntitySaved() && !propertiesLoading"
                           ng-click="updateEntity()">
                    <input type="button" class="btn btn-default blue" value="Remove"
                           ng-if="isEntitySaved() && !propertiesLoading"
                           ng-click="openRemoveConfirmation()">
                </div>
            </div>
        </div>
    </div>
</section>

<section class="sub-topic" ng-if="selectedSideEntity">
    <div class="sub-topic-inner">
        <div ng-if="annotationEntityLoading" class="overlay">
            <i class="fa fa-spinner fa-spin" style="font-size:24px"></i>
        </div>
        <div>
            <div class="browser-arrows">
                <a href="#" ng-click="openLastProperty()">
                    <span class="glyphicon glyphicon-chevron-left"
                          ng-if="selectedSideEntityIndex > 0" style="float:left"></span>
                </a>
                <a href="#" ng-click="openNextProperty()">
                    <span class="glyphicon glyphicon-chevron-right"
                          ng-if="selectedSideEntityIndex < selectedSideEntities.length - 1" style="float:right">
            </span>
                </a>
            </div>
            <!--<label class="info-label mb-15">image:</label>-->
            <a href="#" ng-click="openDetailPopup()">

                <div class="info-image">
                    <img ng-if="!isAnnotationEntitySaved() && selectedSideEntity.image"
                         ng-src="{{selectedSideEntity.image}}"/>
                    <img ng-if="isAnnotationEntitySaved() && selectedSideEntity.image"
                         ng-src="knowledgeBase/api/image/{{selectedSideEntity.image}}"/>
                    <img ng-if="!selectedSideEntity.image && selectedSideEntity.smallImage"
                         ng-src="knowledgeBase/api/image/{{selectedSideEntity.smallImage}}"/>
                    <img ng-if="!selectedSideEntity.image && !selectedSideEntity.smallImage"
                         class="image-placeholder"
                         src="static/knowledge-base/img/image_placeholder.png" ng-click="uploadImage()">

                    <!--<img ng-if="!isEntitySaved() || (selectedEntity.image || selectedEntity.smallImage)" ng-src="{{getImageUrl()}}"/>-->
                </div>
            </a>
        </div>

        <div class="row">
            <div ng-if="selectedSideEntity" class="col-md-12">
                <div ng-if="selectedSideEntity" class="form-group">
                    <label class="info-title mb-5">{{selectedSideEntity.name}}</label>

                    <div ng-if="selectedSideEntity.entityType == 'semantic-web'" class="info-text short-description">
                        {{selectedSideEntity.shortDescription}}
                    </div>
                    <div class="form-group"
                         ng-if="selectedSideEntity.entityType == 'non-semantic-web' && !selectedSideEntity.id">
                        <input type="text" class="form-control pop-up-entity-text-input"
                               ng-value="selectedSideEntity.shortDescription"
                               placeholder="Short Description" id="subcategory-input">
                    </div>
                </div>

                <div ng-if="selectedSideEntity" class="form-group">
                    <!--<label class="info-label mb-15">description:</label>-->
                    <hr style="color:white; margin-top: 10px; margin-bottom:15px;">

                    <div ng-if="selectedSideEntity.entityType == 'semantic-web'"
                         class="info-text description">{{selectedSideEntity.description}}
                    </div>
                    <div class="form-group"
                         ng-if="selectedSideEntity.entityType == 'non-semantic-web' && !selectedSideEntity.id">
                        <input type="text" class="form-control pop-up-entity-text-input"
                               ng-value="selectedSideEntity.description"
                               placeholder="Description" id="subcategory-input">
                    </div>
                </div>
                <div class="row link-box">
                    <div ng-if="selectedSideEntity && selectedSideEntity.dbpediaUri"
                         class="form-group col-md-3">
                        <div class="external-link">
                            <a ng-href="{{selectedSideEntity.dbpediaUri}}" target="_blank">
                                <img src="static/knowledge-base/img/dbpedia.png"/>
                            </a>
                        </div>
                    </div>
                    <div ng-if="selectedSideEntity && selectedSideEntity.wikidataId"
                         class="form-group  col-md-3">
                        <div class="external-link">
                            <a ng-href="https://www.wikidata.org/wiki/{{selectedSideEntity.wikidataId}}"
                               target="_blank">
                                <img src="static/knowledge-base/img/wikidata_text.png"/>
                            </a>
                        </div>
                    </div>
                    <div ng-if="selectedSideEntity && selectedSideEntity.wikipediaUri"
                         class="form-group  col-md-3">

                        <div class="external-link">
                            <a ng-href="{{selectedSideEntity.wikipediaUri}}" target="_blank">
                                <img src="static/knowledge-base/img/wikipedia.png"/>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="form-group" ng-if="!isEntitySaved() && !propertiesLoading">
                    <label class="blue">Category</label>
                    <input type="text" class="form-control" id="entity-category-input"
                           placeholder="Category">
                </div>
                <div class="form-group" ng-if="!isEntitySaved() && !propertiesLoading">
                    <input type="text" class="form-control" id="entity-subcategory-input"
                           placeholder="SubCategory">
                </div>
                <div class="form-group right-save-button">
                    <input type="button" class="btn btn-default blue" value="Save"
                           ng-if="isCustomAnnotation() && !isCustomAnnotationSaved()"
                           ng-click="saveCustomAnnotation()">
                </div>
                <div class="form-group right-save-button">
                    <input type="button" class="btn btn-default blue" value="Save"
                           ng-if="!isEntitySaved()"
                           ng-click="saveEntity()">
                </div>
            </div>
        </div>

    </div>
</section>
</div>
</div>
</div>

<div class="custom-context-menu annotation-results" ng-if="customAnnotationResults.length > 0">
    <ul>
        <a ng-repeat="result in customAnnotationResults" href="#" ng-click="openCustomAnnotation(result)">
            <li>{{result.label}}</li>
        </a>
    </ul>
</div>

</script>

<script type="text/ng-template" id="confirmation-popup">

    <!-- Page Content #F5F5F5 -->
    <div class="col-md-3 col-md-offset-5 pop-up confirmation-pop-up">
        <!-- Simple Blocks -->
        <div class="shadow-wrapper">
            <div class="block mb-0">

                <div class="row">
                    <div class="col-md-12">
                        <label class="confirmation-label">Are you sure?</label>

                        <form class="form-inline">
                            <div class="form-group">
                                <input type="button" class="btn btn-default blue" value="Yes"
                                       ng-click="removeEntity()">
                            </div>
                            <div class="form-group">
                                <input type="button" class="btn btn-default blue" value="No"
                                       ng-click="closeWindow()">
                            </div>
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>

</script>

</body>
</html>